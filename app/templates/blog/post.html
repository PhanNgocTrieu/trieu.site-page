{% extends "base.html" %}

{% block content %}
<article class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <header class="mb-10 text-center">
        <div class="text-sm font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wide mb-2">
            {{ post.created_at.strftime('%B %d, %Y') }} &bull; {{ post.author.username }}
        </div>
        <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight">
            {{ post.title }}
        </h1>

        {% if current_user == post.author or current_user.role == 'admin' %}
        <div class="flex justify-center mb-6">
            <a href="{{ url_for('blog.update_post', post_id=post.id) }}"
                class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                <svg class="-ml-1 mr-2 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path
                        d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                </svg>
                Edit Post
            </a>
        </div>
        {% endif %}

        {% if post.cover_image %}
        <img src="{{ url_for('static', filename='profile_pics/' + post.cover_image) }}" alt="{{ post.title }}"
            class="w-full h-64 sm:h-96 object-cover rounded-xl shadow-lg">
        {% endif %}
    </header>

    <!-- Content -->
    <!-- 'prose' class from @tailwindcss/typography plugin handles all rich text styling automatically -->
    <!-- dark:prose-invert inverts the colors for dark mode -->
    <div class="prose prose-lg prose-indigo dark:prose-invert mx-auto text-gray-700 dark:text-gray-300">
        {{ post.content | safe }}
    </div>

    <!-- Footer -->
    <footer class="mt-12 pt-6 border-t border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between">
            <a href="{{ url_for('blog.index') }}" class="text-indigo-600 hover:text-indigo-800 font-medium">
                &larr; Back to Blog
            </a>

            <!-- Share buttons placeholder -->
            <div class="flex space-x-4">
                <span class="text-gray-400 text-sm">Share this post</span>
            </div>
        </div>
    </footer>
</article>
{% endblock %}